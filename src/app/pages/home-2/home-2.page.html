<ion-menu side="end" contentId="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-title>Configuracion</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding flex flex-col"
    ><button
      class="bg-indigo-400 text-white h-12 rounded-2xl w-32 text-md ion-activatable ripple-parent rounded-rectangle font-montserrat"
      (click)="logoutUser()"
    >
      Cerrar sesion
    </button>
    <button
      (click)="fileInput.click()"
      class="bg-indigo-400 text-white h-12 rounded-2xl w-32 text-md ion-activatable ripple-parent rounded-rectangle font-montserrat"
    >
      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        accept="image/*"
        style="display: none"
      />
      Cambiar Imagen de perfil
    </button>
  </ion-content>
</ion-menu>

<ion-header> </ion-header>

<ion-content id="main-content">
  <button class="float-end mr-5 mt-5" expand="block" (click)="openMenu()">
    <ion-icon name="settings-outline" size="large"></ion-icon>
  </button>

  <div class="flex gap-2 items-center w-[90%] m-auto h-[5%] font-montserrat">
    <img
      [src]="users.profileImageUrl"
      alt="Profile Image"
      class="rounded-full w-24 h-24"
    />

    <h2 class="text-2xl mt-3">{{ users.name }}</h2>
  </div>
  <div class="flex items-center m-auto mt-10 h-[5%] w-[90%] font-montserrat">
    <h2 class="text-3xl">Resumen de tareas</h2>
  </div>
  <div
    class="flex justify-center items-center w-[90%] h-[8%] m-auto text-center mt-5 font-montserrat"
  >
    <div
      class="w-[50%] border-r-2 bg-slate-100 h-full border-black text-2xl flex items-center justify-center font-montserrat"
    >
      {{completedTasks.length}} Tareas Completadas
    </div>
    <div
      class="w-[50%] h-full text-2xl bg-slate-100 flex items-center justify-center font-montserrat"
    >
      {{pendingTasks.length}} Tareas Pendientes
    </div>
  </div>
  <div class="w-[90%] m-auto mt-5">
    <app-chart></app-chart>
  </div>
  <div class="w-[90%] m-auto text-center mt-10">
    <h1 class="text-2xl font-montserrat">Expiración de tareas más cercanas</h1>
    <ion-list
      *ngFor="let task of expTasks"
      lines="none"
      class="w-[90%] m-auto h-[80%] flex flex-col items-center font-montserrat"
    >
      <ion-item class="flex w-[80%] font-montserrat">
        <span class="w-[50%]">holaa{{task.name}}</span>
        <ion-label class="w-[50%] text-right">
          {{ convertTimestampToDate(task.endDate) | date: 'dd-MM-yyyy'
          }}</ion-label
        >
      </ion-item>
    </ion-list>
  </div>
</ion-content>

<ion-footer class="flex items-center h-16 font-montserrat">
  <ion-tabs class="">
    <ion-tab-bar class="border-t-[1px] border-black h-20">
      <ion-tab-button class="text-lg" routerLink="/home-2">
        <ion-icon name="home-outline"></ion-icon>
      </ion-tab-button>
      <ion-tab-button class="text-lg" routerLink="/task">
        <ion-icon name="book-outline"></ion-icon>
      </ion-tab-button>
      <ion-tab-button class="text-lg" routerLink="/notes">
        <ion-icon name="pencil-outline"></ion-icon>
      </ion-tab-button>
      <ion-tab-button class="text-lg" routerLink="/calendar">
        <ion-icon name="calendar-number-outline"></ion-icon>
      </ion-tab-button>
    </ion-tab-bar>
  </ion-tabs>
</ion-footer>
